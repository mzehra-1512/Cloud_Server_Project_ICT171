// --- Text Formatting Functions ---
function format(command, value = null) {
    document.execCommand(command, false, value);
}

function setColor() {
    const color = document.getElementById('colorPicker').value;
    document.execCommand('foreColor', false, color);
}

// --- Save Note to Flask Backend ---
function saveNote() {
    const content = document.getElementById('editor').innerHTML.trim();
    if (content === "") {
        document.getElementById("saveMessage").textContent = "Cannot save empty note!";
        return;
    }

    const noteData = {
        content: content,
        date: new Date().toLocaleString()
    };

    fetch('/save_note', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(noteData)
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById("saveMessage").textContent = data.message;
        setTimeout(() => {
            document.getElementById("saveMessage").textContent = "";
        }, 2500);
        document.getElementById('editor').innerHTML = "";
        location.reload(); 
    })
    .catch(error => {
        console.error('Error:', error);
        document.getElementById("saveMessage").textContent = "Failed to save note!";
    });
}